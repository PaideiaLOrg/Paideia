<div th:fragment="sidebar" id="mobile-menu" class="fixed  flex flex-row">
    <!-- Botão do menu hambúrguer para dispositivos móveis -->

    <!-- Sidebar -->
    <div class="sidebar lg:flex flex-col items-center w-16 text-gray-400"
        style="height: 100vh; background-color: #074778;">



        <!-- Dropdown inserido aqui -->
        <div th:insert="~{/fragments/dropdown :: dropdown}" class="mt-3"></div>


        <a id="menu-toggle-config"
            class="flex items-center justify-center w-16 h-16 mt-auto bg-gray-800 hover:bg-gray-700 hover:text-gray-300"
            href="#">
            <img id="menu-settings-icon" class="transform transition-transform duration-500 rotate-0"
                th:src="@{/images/settings.svg}" alt="Menu Icon" width="70%" />
        </a>


        <!-- Menu flutuante -->
        <div id="menu-dropdown-config"
            class="hidden absolute border-2 border-gray-700 ml-32 bottom-0 w-16 bg-white  shadow-lg">
            <ul class="py-2 text-gray-700">
                <li>
                    <a href="#" class="block px-4 py-2 hover:bg-gray-100">Perfil</a>
                </li>
                <li>
                    <form id="logout-form" action="/auth/logoff" method="POST">
                        <input type="hidden" name="_csrf" th:value="${token}" />
                        <!-- CSRF token para segurança -->
                        <button type="submit" class="block px-4 py-2 hover:bg-gray-100">Sair</button>
                    </form>

                </li>
            </ul>
        </div>

    </div>
</div>

<script th:fragment="sidebar">
    const menuToggle = document.getElementById('menu-toggle-config');
    const menuDropdown = document.getElementById('menu-dropdown-config');
    const menuIcon = document.getElementById('menu-settings-icon');

    menuToggle.addEventListener('click', (e) => {
        e.preventDefault();
        menuDropdown.classList.toggle('hidden');

        // Alterna a classe de rotação entre rotate-0 e rotate-45
        if (menuIcon.classList.contains("rotate-0")) {
            menuIcon.classList.remove("rotate-0");
            menuIcon.classList.add("rotate-90");
        } else {
            menuIcon.classList.remove("rotate-90");
            menuIcon.classList.add("rotate-0");
        }
    });


</script>